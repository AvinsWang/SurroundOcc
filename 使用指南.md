## 配置环境


下载这个docker:  
```docker pull ruoqian/bevformer:ngc2012_latest```

激活conda环境  
```conda activate open-mmlab```

安装mmcv:  
```pip install mmcv-full==1.4.0 -f https://download.openmmlab.com/mmcv/dist/cu111/torch1.9.0/index.html```

安装mmdet3d  
```
git clone https://github.com/open-mmlab/mmdetection3d.git
cd mmdetection3d
git checkout v0.17.1 # Other versions may not be compatible.
python setup.py install
```

安装open3d
```
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple open3d==0.12.0
```


安装chamfer
```
cd SurroundOcc/extensions/chamfer_dist
python setup.py install --user
```

下载预训练权重
```
cd SurroundOcc 
mkdir ckpts

cd ckpts & wget https://github.com/zhiqi-li/storage/releases/download/v1.0/r101_dcn_fcos3d_pretrain.pth
```

下载pkl文件
```
[train](https://cloud.tsinghua.edu.cn/f/ebbed36c37b248149192/?dl=1)/[val](https://cloud.tsinghua.edu.cn/f/b3f169f4db034764bb87/?dl=1)
```

训练
```
./tools/dist_train.sh ./projects/configs/surroundocc/surroundocc.py 8  ./work_dirs/surroundocc
```